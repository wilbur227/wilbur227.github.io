<!DOCTYPE html>
<html lang="en">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="John Doe" />



<meta name="description" content="[TOC] UNIX程序设计笔记头文件12#include&lt;time.h&gt;#include&lt;&gt;  1.Unix基本操作shelllsls -lls -als -R 递归列出所有文件夹man ls查看命令帮助 echo输出cd改变文件夹cd ..回到上一个文件夹cd &#x2F;回到根目录cd ~cdpwd 获取文件所在路径 clear 清屏当唯一确定时tab可以自动补齐mk">
<meta property="og:type" content="article">
<meta property="og:title" content="Unix程序设计（笔记）">
<meta property="og:url" content="http://example.com/2022/10/04/Unix%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1(%E7%AC%94%E8%AE%B0)/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="[TOC] UNIX程序设计笔记头文件12#include&lt;time.h&gt;#include&lt;&gt;  1.Unix基本操作shelllsls -lls -als -R 递归列出所有文件夹man ls查看命令帮助 echo输出cd改变文件夹cd ..回到上一个文件夹cd &#x2F;回到根目录cd ~cdpwd 获取文件所在路径 clear 清屏当唯一确定时tab可以自动补齐mk">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-10-04T03:01:24.000Z">
<meta property="article:modified_time" content="2022-11-10T01:27:50.889Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">



<link rel="stylesheet" href="/css/style.css">




<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Unix程序设计（笔记） | Hexo</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: 
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






<meta name="generator" content="Hexo 6.3.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/keyboardcat.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/"></a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>Menu</li>
                        <li>Tags</li>
                        
                        <li>Friends</li>
                        
                        
                        <li>About Me</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:976816104@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="/wilbur227" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa CSDN" href="/qq_51000584" title="CSDN"></a>
                            
                                <a class="fa QQ" href="/976816104" title="QQ"></a>
                            
                                <a class="fa 微信" href="/z976816104" title="微信"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页"></a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/keyboardcat.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页"></a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:976816104@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="/wilbur227" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa CSDN" target="_blank" href="/qq_51000584" title="CSDN"></a>
                            
                                <a class="fa QQ" target="_blank" href="/976816104" title="QQ"></a>
                            
                                <a class="fa 微信" target="_blank" href="/z976816104" title="微信"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="Tags" friends="Friends" about="About Me"/>
</nav>
      <div class="body-wrap"><article id="post-Unix程序设计(笔记)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/04/Unix%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1(%E7%AC%94%E8%AE%B0)/" class="article-date">
      <time datetime="2022-10-04T03:01:24.000Z" itemprop="datePublished">2022-10-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Unix程序设计（笔记）
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>[TOC]</p>
<h1 id="UNIX程序设计笔记"><a href="#UNIX程序设计笔记" class="headerlink" title="UNIX程序设计笔记"></a>UNIX程序设计笔记</h1><h2 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="1-Unix基本操作"><a href="#1-Unix基本操作" class="headerlink" title="1.Unix基本操作"></a>1.Unix基本操作</h2><h3 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h3><p>ls<br>ls -l<br>ls -a<br>ls -R 递归列出所有文件夹<br>man ls查看命令帮助</p>
<p>echo输出<br>cd改变文件夹<br>cd ..回到上一个文件夹<br>cd &#x2F;回到根目录<br>cd ~<br>cd<br>pwd 获取文件所在路径</p>
<p>clear 清屏<br>当唯一确定时tab可以自动补齐<br>mkdir 创建文件夹<br>rmdir 移除文件夹<br>rm -r递归删除<br>rm -rf强制删除不询问<br>touch 创建文件<br>mv（移动文件&#x2F;重命名文件）<br>cp（拷贝文件或内容）<br>vi（打开一个文件编辑）<br>wq保存并退出<br>q直接退出<br>q!不保存退出</p>
<p>head查看前几行<br>tail查看后几行</p>
<p>ln 硬链接<br>ln -s软链接<br>wc<br>od<br>du<br>df -h查看磁盘使用情况<br>sudo临时提升权限<br>chmod更改权限<br>chown<br>find<br>grep “return” .&#x2F; -R</p>
<p>安装和卸载<br>sudo apt-get update<br>sudo apt-get install package</p>
<p>mount<br>sudo useradd -s 创建用户 </p>
<p>sudo su切换到root用户</p>
<p>进程管理：</p>
<p>ps  aux#监控后台进程</p>
<h4 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h4><p>ls -al 列目录 cp 源文件 目标文件 rm 文件名 mv 源文件 目标文件 ln 源文件 目标文件 cat 文件名 more 文件名</p>
<h4 id="目录管理"><a href="#目录管理" class="headerlink" title="目录管理"></a>目录管理</h4><p>pwd cd mkdir rmdir du</p>
<h4 id="文本编辑器vi"><a href="#文本编辑器vi" class="headerlink" title="文本编辑器vi"></a>文本编辑器vi</h4><p>sp上下分屏</p>
<p>vsp左右分屏</p>
<p>Ctr+w+w: 在多个窗口切换</p>
<h2 id="2-编程套件"><a href="#2-编程套件" class="headerlink" title="2.编程套件"></a>2.编程套件</h2><h3 id="gcc或cc"><a href="#gcc或cc" class="headerlink" title="gcc或cc"></a>gcc或cc</h3><h5 id="编译程序"><a href="#编译程序" class="headerlink" title="编译程序"></a>编译程序</h5><p>gcc [options] filename</p>
<p>gcc first.c</p>
<h5 id="执行程序"><a href="#执行程序" class="headerlink" title="执行程序"></a>执行程序</h5><p>a.outs是程序first.c经过编译后的目标码 .&#x2F;a.out</p>
<h5 id="gcc选项"><a href="#gcc选项" class="headerlink" title="gcc选项"></a>gcc选项</h5><p>编译源文件 gcc first.c gcc first.c end.c</p>
<h5 id="头文件-1"><a href="#头文件-1" class="headerlink" title="头文件"></a>头文件</h5><p>在当前目录中查找头文件 gcc -I.&#x2F; first.c 同时在&#x2F;user&#x2F;include和当前目录下查找头文件 gcc -I&#x2F;user&#x2F;include -I.&#x2F; first.c</p>
<h5 id="库文件"><a href="#库文件" class="headerlink" title="库文件"></a>库文件</h5><h5 id="目标文件"><a href="#目标文件" class="headerlink" title="目标文件"></a>目标文件</h5><h5 id="宏定义"><a href="#宏定义" class="headerlink" title="宏定义"></a>宏定义</h5><h5 id="编译选项"><a href="#编译选项" class="headerlink" title="编译选项"></a>编译选项</h5><h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><h3 id="gdb调试"><a href="#gdb调试" class="headerlink" title="gdb调试"></a>gdb调试</h3><h2 id="3-库的使用"><a href="#3-库的使用" class="headerlink" title="3.库的使用"></a>3.库的使用</h2><h4 id="静态库"><a href="#静态库" class="headerlink" title="静态库"></a>静态库</h4><p>静态库的代码在编译时链接到应用程序中，因此编译时库文件必须存在。<br>应用程序开始执行时，库函数代码段将随程序一起调入进程内存段，直到进程结束，其执行过程不需要原静态库存在。</p>
<h4 id="动态库"><a href="#动态库" class="headerlink" title="动态库"></a>动态库</h4><p>也称为共享库，其代码不会链接到目标文件之中，只有当动态库可访问时，应用程序才能正确执行动态库函数。</p>
<h5 id="隐式调用"><a href="#隐式调用" class="headerlink" title="隐式调用"></a>隐式调用</h5><p>动态库函数在应用程序开始执行时会自动载入内存，进程结束时又自动卸载。（编译方式与静态库一致）</p>
<h5 id="显示调用"><a href="#显示调用" class="headerlink" title="显示调用"></a>显示调用</h5><p>编译时可以不显示地提供原动态库文件及名称，但是必须遵循eloped等函数的规则实现调用</p>
<h4 id="操作工具"><a href="#操作工具" class="headerlink" title="操作工具"></a>操作工具</h4><p>使用ar命令可以创建或操作静态库，它的格式为：<br>ar [drqtpmx] [options] archive file objectfie</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>-r</td>
<td>将objfile文件插入静态库尾或替换静态库中同名文件</td>
</tr>
<tr>
<td>-x</td>
<td>从静态库文件中抽取文件objfile</td>
</tr>
<tr>
<td>-t</td>
<td>打印静态库的成员文件列表</td>
</tr>
<tr>
<td>-d</td>
<td>从静态库中删除文件objfile</td>
</tr>
<tr>
<td>-s</td>
<td>重置静态库文件索引</td>
</tr>
<tr>
<td>-v</td>
<td>创建文件冗余信息</td>
</tr>
<tr>
<td>-c</td>
<td>创建静态库文件</td>
</tr>
</tbody></table>
<h4 id="静态库编程"><a href="#静态库编程" class="headerlink" title="静态库编程"></a>静态库编程</h4><p>源码</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">\\pr1.c</span><br><span class="line"><span class="type">void</span> <span class="title function_">print1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;This is the first lib src!\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">\\pr2.c</span><br><span class="line"><span class="type">void</span> <span class="title function_">print2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;This is the second lib src!\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="静态库的应用"><a href="#静态库的应用" class="headerlink" title="静态库的应用"></a>静态库的应用</h5><p>1.调用库函数代码 2.编译链接选项</p>
<h4 id="动态库编程"><a href="#动态库编程" class="headerlink" title="动态库编程"></a>动态库编程</h4><h2 id="4-文件系统结构"><a href="#4-文件系统结构" class="headerlink" title="4.文件系统结构"></a>4.文件系统结构</h2><h5 id="文件属性函数族"><a href="#文件属性函数族" class="headerlink" title="文件属性函数族"></a>文件属性函数族</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">stat</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *path,<span class="keyword">struct</span> stat *buf)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">fstat</span><span class="params">(<span class="type">int</span> flies,<span class="keyword">struct</span> stat *buf)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">lstat</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *path,<span class="keyword">struct</span> stat *buf)</span>;</span><br><span class="line">获取文件的属性信息存储到buf中</span><br></pre></td></tr></table></figure>

<h5 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h5><p>普通文件<br>目录文件<br>管道文件<br>设备文件<br>符号链接文件<br>SOCKET文件</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*判断文件类型1*/</span></span><br><span class="line"><span class="keyword">if</span>((st_mode &amp; _S_IFMT) == S_IFREG)&#123;</span><br><span class="line">  <span class="comment">//是普通文件</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="comment">//不是</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*判断文件类型2*/</span></span><br><span class="line"><span class="keyword">if</span>(S_ISREG(st_mode))是普通文件</span><br><span class="line"><span class="keyword">else</span> 不是</span><br></pre></td></tr></table></figure>

<p>判断文件类型宏<br>P51页<br>#include&lt;stat.h&gt;</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断输入的文件类型</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">GetFileType</span><span class="params">(<span class="type">mode_t</span> st_mode, <span class="type">char</span> *resp)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(resp == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span>(S_ISDIR(st_mode)) resp[<span class="number">0</span>] = <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(S_ISCHR(st_mode)) resp[<span class="number">0</span>] = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(S_ISBLK(st_mode)) resp[<span class="number">0</span>] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(S_ISREG(st_mode)) resp[<span class="number">0</span>] = <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(S_ISFIFO(st_mode)) resp[<span class="number">0</span>] = <span class="string">&#x27;p&#x27;</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(S_ISLNK(st_mode)) resp[<span class="number">0</span>] = <span class="string">&#x27;l&#x27;</span>;</span><br><span class="line">  <span class="keyword">else</span> resp[<span class="number">0</span>] = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断输入的文件权限</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">GetFileMode</span><span class="params">(<span class="type">mode_t</span> st_mode,<span class="type">char</span> *resp)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(resp == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">memset</span>(resp, <span class="string">&#x27;-&#x27;</span>,<span class="number">9</span>);</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IRUSR) resp[<span class="number">0</span>] = <span class="string">&#x27;r&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IWUSR) resp[<span class="number">1</span>] = <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IXUSR) resp[<span class="number">2</span>] = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IRGRP) resp[<span class="number">3</span>] = <span class="string">&#x27;r&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IWGRP) resp[<span class="number">4</span>] = <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IXGRP) resp[<span class="number">5</span>] = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IROTH) resp[<span class="number">6</span>] = <span class="string">&#x27;r&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IWOTH) resp[<span class="number">7</span>] = <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(st_mode &amp; S_IXOTH) resp[<span class="number">8</span>] = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">GetFileOtherAttr</span><span class="params">(<span class="keyword">struct</span> stat info,<span class="type">char</span> *resp)</span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">tm</span> * <span class="title">mtime</span>;</span></span><br><span class="line">    <span class="keyword">if</span>(resp == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    mtime = localtime(&amp;info.st_mtime);</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">sprintf</span>(resp,<span class="string">&quot; %3d %6d %6d %11d %04d%02d%02d&quot;</span>,(<span class="type">int</span>)info.st_nlink,(<span class="type">int</span>)info.st_uid,(<span class="type">int</span>)info.st_gid,(<span class="type">int</span>)info.st_size,mtime-&gt;tm_year+<span class="number">1900</span>,mtime-&gt;tm_mon+<span class="number">1</span>,mtime-&gt;tm_mday));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span> **argv)</span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">stat</span> <span class="title">info</span>;</span></span><br><span class="line">    <span class="type">char</span> buf[<span class="number">100</span>],*p = buf;</span><br><span class="line">    <span class="keyword">if</span>(argc != <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">&quot;ls1 filename\n&quot;</span>);</span><br><span class="line">    	<span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(buf,<span class="number">0</span>,<span class="keyword">sizeof</span>(buf));</span><br><span class="line">    <span class="keyword">if</span>(lstat(argv[<span class="number">1</span>],&amp;info) == <span class="number">0</span>)&#123;</span><br><span class="line">        p += GetFileType(info.st_mode,p);</span><br><span class="line">        p += GetFileMode(info.st_mode,p);</span><br><span class="line">        p += GetFileOtherAttr(info,p);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s %s\n&quot;</span>,buf,argv[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">&quot;open file failed\n&quot;</span>);    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对比执行bf</span></span><br><span class="line"><span class="comment">//读取文件系统信息</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/statfs.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/vfs.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">status</span> <span class="title">buf</span>;</span></span><br><span class="line">    <span class="keyword">if</span>(argc != <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    statfs (argv [<span class="number">1</span>] ,&amp;buf, <span class="keyword">sizeof</span>(buf), <span class="number">0</span>) ;</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">&quot;FILE SYSTEM: \ntype=%d\n&quot;</span>, buf.f_type) ;</span><br><span class="line">    <span class="comment">/*文件系统类型*/</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;bsize=%d\n&quot;</span>, buf.f_bsize);</span><br><span class="line">    <span class="comment">/* 数据块大小*/</span></span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">&quot;blocks=%d\n&quot;</span> , buf.f_blocks) ;</span><br><span class="line">    <span class="comment">/* 数据块总数*/</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;bfee=%d\n&quot;</span>,buf.f_bfree);</span><br><span class="line">    *可用块数*</span><br><span class="line">    print (<span class="string">&quot;files=%d\n&quot;</span>, buf.f_files);</span><br><span class="line">    <span class="comment">/* inode总数*/</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ffree=%d\n&quot;</span>, buf.f_ffree):</span><br><span class="line">    <span class="comment">/* THinode* * /</span></span><br><span class="line"><span class="comment">    printf(&quot;%s  :%d blocks %d i-nodes\n&quot;,argv[1] , buf.f_bfree,buf.f_ffree);</span></span><br><span class="line"><span class="comment">    return 0;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="5-标准文件编程库"><a href="#5-标准文件编程库" class="headerlink" title="5.标准文件编程库"></a>5.标准文件编程库</h2><p>标准文件编程库中用于文件创建、打开、关闭与删除的西数如下： #include &lt;stdio.h&gt; FILE *fopen (const char *filename, const char *type) ; FILE *freopen (const char *filename, const char *type, FILE *stream) int close (FILE *stream) int remove (const char * filename); int rename (const char *oldname, const char *newname) 函数fopen打开或创建新文件； 函数fclose关闭文件； 函数freopen重新打开文件； 函数remove删除磁盘文件； 函数rename更改文件名称。 打开关闭文件函数族参数意义</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>filename</td>
<td>打开文件的名称(带路径)</td>
</tr>
<tr>
<td>Type</td>
<td>打开文件的方式，由权限和类型两部分组成，前者可以是文本文件，使用b表示二进制文件。</td>
</tr>
<tr>
<td>stream</td>
<td>己经打开的文件指针</td>
</tr>
</tbody></table>
<h2 id="6-低级文件编程库"><a href="#6-低级文件编程库" class="headerlink" title="6.低级文件编程库"></a>6.低级文件编程库</h2><h2 id="7-目录文件编程库"><a href="#7-目录文件编程库" class="headerlink" title="7.目录文件编程库"></a>7.目录文件编程库</h2><h2 id="8-设备文件"><a href="#8-设备文件" class="headerlink" title="8.设备文件"></a>8.设备文件</h2><h2 id="9-进程的控制"><a href="#9-进程的控制" class="headerlink" title="9.进程的控制"></a>9.进程的控制</h2><h5 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h5><p>进程由程序、数据、进程控制块三部分组成</p>
<p>程序：描述进程所要完成的功能</p>
<p>数据：为进程提供运行所需的堆栈和私有数据</p>
<p>进程控制块（PCB）：含有进程的描述和控制信息，集中反映进程的动态特性，是系统识别和控制进程的依据。</p>
<h5 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h5><p>又称负荷进程，是在进程基础上程序的一次执行，一个进程可以拥有多个线程。</p>
<p>线程没有独立资源，它共享进程ID和进程的资源。</p>
<p>线程是UNIX中最小的调度单位</p>
<h5 id="守护进程"><a href="#守护进程" class="headerlink" title="守护进程"></a>守护进程</h5><p>sysproc：标识号为0,能合理地调度系统中运行的进程，负责将进程从硬盘交换区调入内存或将进程从内存调到硬盘交换区。</p>
<p>init：标识号为1，系统初始化的进程，是sysproc外所有进程的父进程。</p>
<h5 id="前台进程和后台进程"><a href="#前台进程和后台进程" class="headerlink" title="前台进程和后台进程"></a>前台进程和后台进程</h5><p>前台进程会接管终端，SHELL不能再输入其他命令直到进程执行完</p>
<p>在命令串后加上“&amp;”，表示后台执行，后台进程不接管终端</p>
<h5 id="父子进程"><a href="#父子进程" class="headerlink" title="父子进程"></a>父子进程</h5><p>当一个进程启动另一个进程时，被启动的进程就是子进程，原进程就是父进程。父子进程以并行的方式执行同一程序的不同分支</p>
<h5 id="进程状态"><a href="#进程状态" class="headerlink" title="进程状态"></a>进程状态</h5><p>运行态：进程已经分配到CPU正在处理机上执行的状态</p>
<p>就绪态：进程已具备运行条件，但是其他进程正占用CPU，而暂时不能运行等待分配的状态</p>
<p>睡眠态：进程正在等待某事件发生而不能运行的状态，睡眠被唤醒后只能进入就绪态不能直接进入运行态。</p>
<h5 id="进程标识"><a href="#进程标识" class="headerlink" title="进程标识"></a>进程标识</h5><h5 id="进程的创建"><a href="#进程的创建" class="headerlink" title="进程的创建"></a>进程的创建</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">pid_t</span> <span class="title function_">fork</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p>新创建的进程称为子进程，调用fork()的进程称为父进程</p>
<p>如果fork()调用失败，返回-1；如果调用成功，则在父进程中返回子进程的标识号，在子进程中返回0。</p>
<p>创建fork1.c</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">pid_t</span> pid;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;Process Begin. pid=[%d],i=[%d]\n&quot;</span>,getpid(),i);</span><br><span class="line">    <span class="keyword">if</span>((pid = fork()) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;Parent pid=[%d],child pid=[%d]\n&quot;</span>,getpid(),pid);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(pid == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;Child pid=[%d]\n&quot;</span>,getpid());</span><br><span class="line">        i++;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;Fork failed.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;Process end.pid=[%d],i=[%d]\n&quot;</span>,getpid(),i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Process Begin. pid=[2778],i=[0]</span><br><span class="line">Parent pid=[2778],child pid=[2779]</span><br><span class="line">Process end.pid=[2778],i=[0]</span><br><span class="line">Child pid=[2779]</span><br><span class="line">Process end.id=[2779],i=[1]</span><br></pre></td></tr></table></figure>



<h5 id="进程的休眠"><a href="#进程的休眠" class="headerlink" title="进程的休眠"></a>进程的休眠</h5><h5 id="进程的终止"><a href="#进程的终止" class="headerlink" title="进程的终止"></a>进程的终止</h5><h5 id="进程的同步"><a href="#进程的同步" class="headerlink" title="进程的同步"></a>进程的同步</h5><h5 id="僵尸进程"><a href="#僵尸进程" class="headerlink" title="僵尸进程"></a>僵尸进程</h5><p>已经中止但是没有从进程表中清除的进程。</p>
<h5 id="守护进程-1"><a href="#守护进程-1" class="headerlink" title="守护进程"></a>守护进程</h5><p>独立于终端，长期在后台运行，周期性的执行某项任务，或者阻塞直到事件发生，守护计算机系统的正常运行。</p>
<p>大部分SOCKET通信都是以守护进程的方式执行</p>
<p>编写：</p>
<p>1.后台执行</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">pid_t</span> pid1;</span><br><span class="line">pid1 = fork();</span><br><span class="line"><span class="keyword">if</span>(pid1&gt;<span class="number">0</span>)<span class="built_in">exit</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>2.独立于控制终端</p>
<p>自立新的进程组（会话组进程）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">pid_t</span> <span class="title function_">setsid</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">//调用成功返回创建的进程组ID，失败返回-1</span></span><br></pre></td></tr></table></figure>

<p>3.清除文件创建掩码</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umask(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>4.处理信号</p>
<p>防止父进程没有等待子进程的结束而导致子进程僵死。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">signal(SIGCHLD,SIG_IGN);</span><br></pre></td></tr></table></figure>

<p>守护进程实例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;comlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ClearChild</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">pid_t</span> <span class="type">_pid_t</span>;</span><br><span class="line">    <span class="type">int</span> nState;</span><br><span class="line">    <span class="keyword">while</span>((<span class="type">_pid_t</span> = waitpid(<span class="number">-1</span>,&amp;nState,WNOHANG))&gt;<span class="number">0</span>);</span><br><span class="line">    signal(SIGCLD,ClearChild);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitServer</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">pid_t</span> pid1;</span><br><span class="line">    ASSERT((pid1 = fork()) &gt;= <span class="number">0</span>);<span class="comment">/*等价于IF判断*/</span></span><br><span class="line">	<span class="comment">//创建子进程</span></span><br><span class="line">    <span class="keyword">if</span>( pid1 &gt; <span class="number">0</span>)&#123;<span class="comment">//父进程失败退出，子进程托管</span></span><br><span class="line">        sleep(<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    ASSERT(setsid() &gt;= <span class="number">0</span>);<span class="comment">//子进程脱离终端</span></span><br><span class="line">    umask(<span class="number">0</span>);<span class="comment">//清除文件创建掩码</span></span><br><span class="line">    signal(SIGINT,SIG_IGN);<span class="comment">//忽略程序终止程序</span></span><br><span class="line">    signal(SIGCLD,ClearChild);<span class="comment">//一次性的函数，处理信号预防僵死进程</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    InitServer();</span><br><span class="line">    sleep(<span class="number">120</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>进程间的交流：信号、通信</p>
<h2 id="10-时钟和信号"><a href="#10-时钟和信号" class="headerlink" title="10.时钟和信号"></a>10.时钟和信号</h2><h3 id="时钟"><a href="#时钟" class="headerlink" title="时钟"></a>时钟</h3><p>1970年1月1日0点0分0秒为UNIX纪元</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取本地时间</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h3><p>概念：信号是传递给进程的事件通知，它可以完成进程间异步事件的通信</p>
<h4 id="信号的产生"><a href="#信号的产生" class="headerlink" title="信号的产生"></a>信号的产生</h4><h5 id="1-程序出错"><a href="#1-程序出错" class="headerlink" title="1.程序出错"></a>1.程序出错</h5><p>硬件出现异常、除数为0、或者软件非法访问等情况时产生</p>
<h5 id="2-外部事件"><a href="#2-外部事件" class="headerlink" title="2.外部事件"></a>2.外部事件</h5><p>当定时器到达、用户按键中断或者进程调用abort等信号发送函数时产生</p>
<h5 id="3-显示请求"><a href="#3-显示请求" class="headerlink" title="3.显示请求"></a>3.显示请求</h5><p>当进程调用KILL、RAISE、等信号发送函数或者用户执行SHELL命令KILL传递信号时产生</p>
<h4 id="信号的处理"><a href="#信号的处理" class="headerlink" title="信号的处理"></a>信号的处理</h4><h5 id="1-系统处理"><a href="#1-系统处理" class="headerlink" title="1.系统处理"></a>1.系统处理</h5><p>由UNIX内核完成，系统对不同信号采取不同的默认处理方式</p>
<table>
<thead>
<tr>
<th align="left">方式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">终止</td>
<td>进程退出</td>
</tr>
<tr>
<td align="left">忽略</td>
<td>丢弃信号</td>
</tr>
<tr>
<td align="left">core-dump</td>
<td>进程退出，并将进程在内存中的数据和存储器状态以某种特殊的格式转存到文件系统core文件中，本类信号在程序异常时发生，产生core文件供程序员参考。</td>
</tr>
<tr>
<td align="left">挂起</td>
<td>进程进入睡眠状态</td>
</tr>
<tr>
<td align="left">继续</td>
<td>唤醒睡眠中的进程</td>
</tr>
</tbody></table>
<h5 id="2-忽略信号"><a href="#2-忽略信号" class="headerlink" title="2.忽略信号"></a>2.忽略信号</h5><h5 id="3-捕获信号"><a href="#3-捕获信号" class="headerlink" title="3.捕获信号"></a>3.捕获信号</h5><h4 id="信号全家福"><a href="#信号全家福" class="headerlink" title="信号全家福"></a>信号全家福</h4><table>
<thead>
<tr>
<th align="left">编号</th>
<th>信号</th>
<th>描述</th>
<th>默认动作</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td>SIGHUP</td>
<td>终端退出</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">2</td>
<td>SIGINT</td>
<td>程序终止</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">3</td>
<td>SIGQUIT</td>
<td>程序终止</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">4</td>
<td>SIGILL</td>
<td>非法指令</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">5</td>
<td>SIGTRAP</td>
<td>代码陷阱</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">6</td>
<td>SIGABRT</td>
<td>程序终止</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">7</td>
<td>SIGEMT</td>
<td>硬件故障</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">8</td>
<td>SIGFPE</td>
<td>算术异常</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">9</td>
<td>SIGKILL</td>
<td>程序终止</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">10</td>
<td>SIGBUS</td>
<td>总线错误</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">11</td>
<td>SIGSEGV</td>
<td>访问受限</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">12</td>
<td>SIGSYS</td>
<td>非法的系统调用</td>
<td>core-dump</td>
</tr>
<tr>
<td align="left">13</td>
<td>SIGPIPE</td>
<td>管道异常</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">14</td>
<td>SIGALRM</td>
<td>定时器</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">15</td>
<td>SIGTERM</td>
<td>程序终止</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">16</td>
<td>SIGUSR1</td>
<td>预留信号</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">17</td>
<td>SIGUSR2</td>
<td>预留信号</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">18</td>
<td>SIGCHLD</td>
<td>子进程退出</td>
<td>忽略信号</td>
</tr>
<tr>
<td align="left">19</td>
<td>SIGPWR</td>
<td>掉电</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">20</td>
<td>SIGWINCH</td>
<td>窗口改变</td>
<td>忽略信号</td>
</tr>
<tr>
<td align="left">21</td>
<td>SIGURG</td>
<td>紧急事件</td>
<td>忽略信号</td>
</tr>
<tr>
<td align="left">22</td>
<td>SIGPOLL</td>
<td>异步I&#x2F;O信号</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">23</td>
<td>SIGSTOP</td>
<td>挂起进程</td>
<td>挂起进程</td>
</tr>
<tr>
<td align="left">24</td>
<td>SIGTSTP</td>
<td>挂起进程</td>
<td>挂起进程</td>
</tr>
<tr>
<td align="left">25</td>
<td>SIGCONT</td>
<td>唤醒挂起进程</td>
<td>忽略信号</td>
</tr>
<tr>
<td align="left">26</td>
<td>SIGTTIN</td>
<td>后台进程读终端</td>
<td>挂起进程</td>
</tr>
<tr>
<td align="left">27</td>
<td>SIGTTOU</td>
<td>后台进程写终端</td>
<td>挂起进程</td>
</tr>
<tr>
<td align="left">28</td>
<td>SIGVTALRM</td>
<td>定时器</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">29</td>
<td>SIGPROF</td>
<td>定时器</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">30</td>
<td>SIGXCPU</td>
<td>超过CPU限制</td>
<td>终止进程</td>
</tr>
<tr>
<td align="left">31</td>
<td>SIGXFSZ</td>
<td>超过文件大小限制</td>
<td>终止进程</td>
</tr>
</tbody></table>
<h5 id="全局跳转"><a href="#全局跳转" class="headerlink" title="全局跳转"></a>全局跳转</h5><p>局部跳转： goto 只能跳转到所在函数的某个位置</p>
<p>setjmp存储当前的堆栈环境到参数env中，当函数正常调用成功时返回0。 函数longjmp调用成功后，程序转移到函数setjmp处执行，函数返回val。如果val取值为0，为了与上次正常调用区分，setjmp将返回1。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;setjump.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">setmp</span><span class="params">(jmp_buf env)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">longjmp</span><span class="params">(jmp_buf env,<span class="type">int</span> val)</span>;</span><br><span class="line">\\例子</span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;setjmp.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">jmp_buf env;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> i, k = <span class="number">0</span>;</span><br><span class="line">    i = setjmp(env);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;setjmp=[%d];j=[%d];k=[%d]\n&quot;</span>,i,j++,k++);</span><br><span class="line">    <span class="keyword">if</span>(j&gt;<span class="number">2</span>) <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    longjmp(env,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>$.&#x2F;jmp1 setjmp&#x3D;[0];j&#x3D;[0];k&#x3D;[0] setjmp&#x3D;[1];j&#x3D;[1];k&#x3D;[0] setjmp&#x3D;[1];j&#x3D;[2];k&#x3D;[0]</p>
<h2 id="11-管道"><a href="#11-管道" class="headerlink" title="11.管道"></a>11.管道</h2><p>一种队列数据结构，它的数据从一端输入另一端输出。管道可以用于连接两个进程的输入输出，即把一个进程的输出变成另一个的输入。</p>
<h3 id="无名管道"><a href="#无名管道" class="headerlink" title="无名管道"></a>无名管道</h3><p>占用两个文件描述符，不能被非亲血缘关系的进程共享，一般应用在父子进程。</p>
<h4 id="创建无名管道"><a href="#创建无名管道" class="headerlink" title="创建无名管道"></a>创建无名管道</h4><h4 id="单向管道流"><a href="#单向管道流" class="headerlink" title="单向管道流"></a>单向管道流</h4><p>步骤1：创建管道，返回两个无名管道文件描述符对 fildes1 和fildes2。为了简化书写，我们称fildes1 为管道1fildes2 为管道2。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> fildes1[<span class="number">2</span>], fildes2(<span class="number">2</span>] ;</span><br><span class="line">pipe (fildes1);</span><br><span class="line">pipe (fildes2);</span><br></pre></td></tr></table></figure>

<p>步骤2：创建子进程，子进程中继承管道1和管道2。 步骤3：父进程关闭管道1的输出端，即关闭只读文件描述符 fleds1[0]。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">close(fildes1[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>

<p>步骤4：子进程关闭管道1的输入端，即关闭只写文件描述符 fileds1[1]。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">close (fildes1[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<p>步骤5：父进程关闭管道工的输入端，即关闭只读文件描述符 fileds2[1]。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">close (fildes2[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>

<p>步骤6：子进程关闭管道11的输出端，即关闭只写文件描述符 fileds2[0]。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">close (fildes2[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<p>实例</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> fildes[<span class="number">2</span>];</span><br><span class="line">	<span class="type">pid_t</span> pid;</span><br><span class="line">	<span class="type">int</span> i, j;</span><br><span class="line">	<span class="type">char</span> buf[<span class="number">256</span>];</span><br><span class="line">	<span class="keyword">if</span> (pipe(fildes) &lt; <span class="number">0</span>)	<span class="comment">/* 创建管道 */</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;pipe error!\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> ((pid = fork()) &lt; <span class="number">0</span>)	<span class="comment">/* 创建子进程 */</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;fork error!\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (pid == <span class="number">0</span>)		<span class="comment">/* 子进程 */</span></span><br><span class="line">	&#123;</span><br><span class="line">		close(fildes[<span class="number">1</span>]);</span><br><span class="line">		<span class="built_in">memset</span>(buf, <span class="number">0</span>, <span class="keyword">sizeof</span>(buf));</span><br><span class="line">		j = read(fildes[<span class="number">0</span>], buf, <span class="keyword">sizeof</span>(buf));  <span class="comment">/* 读管道 */</span></span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;[child] buf=[%s]len[%d]\n&quot;</span>, buf, j);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/* 父进程  */</span></span><br><span class="line">	close(fildes[<span class="number">0</span>]); <span class="comment">/*父进程关闭管道输入*/</span></span><br><span class="line">	write(fildes[<span class="number">1</span>], <span class="string">&quot;hello!&quot;</span>, <span class="built_in">strlen</span>(<span class="string">&quot;hello!&quot;</span>)); <span class="comment">/*写管道*/</span></span><br><span class="line">	write(fildes[<span class="number">1</span>], <span class="string">&quot;world!&quot;</span>, <span class="built_in">strlen</span>(<span class="string">&quot;world!&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="双向管道"><a href="#双向管道" class="headerlink" title="双向管道"></a>双向管道</h4><p>实例</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">WriteG</span><span class="params">(<span class="type">int</span> fd, <span class="type">char</span> *str, <span class="type">int</span> len)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> buf[<span class="number">255</span>];</span><br><span class="line">	<span class="built_in">memset</span>(buf, <span class="number">0</span>, <span class="keyword">sizeof</span>(buf));</span><br><span class="line">	<span class="built_in">sprintf</span>(buf, <span class="string">&quot;%s&quot;</span>, str);</span><br><span class="line">	write(fd, buf, len);	</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">char</span> *<span class="title function_">ReadG</span><span class="params">(<span class="type">int</span> fd, <span class="type">int</span> len)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> buf[<span class="number">255</span>];</span><br><span class="line">	<span class="built_in">memset</span>(buf, <span class="number">0</span>, <span class="keyword">sizeof</span>(buf));</span><br><span class="line">	read(fd, buf, len);</span><br><span class="line">	<span class="keyword">return</span>(buf);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">WriteC</span><span class="params">(<span class="type">int</span> fd, <span class="type">char</span> *str)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> buf[<span class="number">255</span>];</span><br><span class="line">	<span class="built_in">sprintf</span>(buf, <span class="string">&quot;%04d%s&quot;</span>, <span class="built_in">strlen</span>(str), str);</span><br><span class="line">	write(fd, buf, <span class="built_in">strlen</span>(buf));</span><br><span class="line">&#125;	</span><br><span class="line"><span class="type">char</span> *<span class="title function_">ReadC</span><span class="params">(<span class="type">int</span> fd)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> buf[<span class="number">255</span>];</span><br><span class="line">	<span class="type">int</span> i, j;</span><br><span class="line">	<span class="built_in">memset</span>(buf, <span class="number">0</span>, <span class="keyword">sizeof</span>(buf));</span><br><span class="line">	j = read(fd, buf, <span class="number">4</span>);</span><br><span class="line">	i = atoi(buf);</span><br><span class="line">	j = read(fd, buf, i);</span><br><span class="line">	<span class="keyword">return</span>(buf);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> fildes1[<span class="number">2</span>], fildes2[<span class="number">2</span>];</span><br><span class="line">	<span class="type">pid_t</span> pid;</span><br><span class="line">	<span class="type">char</span> buf[<span class="number">255</span>];</span><br><span class="line">	<span class="keyword">if</span> (pipe(fildes1) &lt; <span class="number">0</span> || pipe(fildes2) &lt; <span class="number">0</span>)	<span class="comment">/* 创建管道 */</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;pipe error!\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> ((pid = fork()) &lt; <span class="number">0</span>)	<span class="comment">/* 创建子进程 */</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;fork error!\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (pid == <span class="number">0</span>)		<span class="comment">/* 子进程 */</span></span><br><span class="line">	&#123;</span><br><span class="line">		close(fildes1[<span class="number">1</span>]);</span><br><span class="line">		close(fildes2[<span class="number">0</span>]);</span><br><span class="line">		<span class="built_in">strcpy</span>(buf, ReadG(fildes1[<span class="number">0</span>], <span class="number">10</span>));</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;[child] buf=[%s]\n&quot;</span>, buf);</span><br><span class="line">		WriteC(fildes2[<span class="number">1</span>], buf);</span><br><span class="line">		<span class="built_in">strcpy</span>(buf, ReadG(fildes1[<span class="number">0</span>], <span class="number">10</span>));</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;[child] buf=[%s]\n&quot;</span>, buf);</span><br><span class="line">		WriteC(fildes2[<span class="number">1</span>], buf);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/* 父进程 */</span></span><br><span class="line">	close(fildes1[<span class="number">0</span>]);</span><br><span class="line">	close(fildes2[<span class="number">1</span>]);</span><br><span class="line">	WriteG(fildes1[<span class="number">1</span>], <span class="string">&quot;hello!&quot;</span>, <span class="number">10</span>);</span><br><span class="line">	WriteG(fildes1[<span class="number">1</span>], <span class="string">&quot;world!&quot;</span>, <span class="number">10</span>);</span><br><span class="line">	<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;[father] buf=[%s]\n&quot;</span>, ReadC(fildes2[<span class="number">0</span>]));</span><br><span class="line">	<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;[father] buf=[%s]\n&quot;</span>, ReadC(fildes2[<span class="number">0</span>]));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h4 id="I-x2F-O重定向"><a href="#I-x2F-O重定向" class="headerlink" title="I&#x2F;O重定向"></a>I&#x2F;O重定向</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> fildes[<span class="number">2</span>];</span><br><span class="line">	<span class="type">pid_t</span> pid;</span><br><span class="line">	<span class="type">int</span> i, j;</span><br><span class="line">	<span class="type">char</span> buf[<span class="number">256</span>];</span><br><span class="line">	<span class="keyword">if</span> (pipe(fildes) &lt; <span class="number">0</span> || (pid = fork()) &lt; <span class="number">0</span>)	<span class="comment">/* ¥¥Ω®π‹µ¿∫Õ◊”Ω¯≥Ã */</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;error!\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (pid == <span class="number">0</span>)		<span class="comment">/* ◊”Ω¯≥Ã */</span></span><br><span class="line">	&#123;</span><br><span class="line">		close(fildes[<span class="number">1</span>]);</span><br><span class="line">		dup2(fildes[<span class="number">0</span>], <span class="number">0</span>);</span><br><span class="line">		close(fildes[<span class="number">0</span>]);</span><br><span class="line">		gets(buf);</span><br><span class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;child:[%s]\n&quot;</span>, buf);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/* ∏∏Ω¯≥Ã */</span></span><br><span class="line">	close(fildes[<span class="number">0</span>]);</span><br><span class="line">	dup2(fildes[<span class="number">1</span>], <span class="number">1</span>);</span><br><span class="line">	close(fildes[<span class="number">1</span>]);</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="popen模型"><a href="#popen模型" class="headerlink" title="popen模型"></a>popen模型</h4><h3 id="有名管道"><a href="#有名管道" class="headerlink" title="有名管道"></a>有名管道</h3><h4 id="创建有名管道"><a href="#创建有名管道" class="headerlink" title="创建有名管道"></a>创建有名管道</h4><h4 id="应用有名管道的流程"><a href="#应用有名管道的流程" class="headerlink" title="应用有名管道的流程"></a>应用有名管道的流程</h4><h4 id="应用有名管道的模型"><a href="#应用有名管道的模型" class="headerlink" title="应用有名管道的模型"></a>应用有名管道的模型</h4><h5 id="“1-1”模型"><a href="#“1-1”模型" class="headerlink" title="“1-1”模型"></a>“1-1”模型</h5><h5 id="“n-1”模型"><a href="#“n-1”模型" class="headerlink" title="“n-1”模型"></a>“n-1”模型</h5><h5 id="“n-1-n”模型"><a href="#“n-1-n”模型" class="headerlink" title="“n-1-n”模型"></a>“n-1-n”模型</h5><h2 id="12-消息队列"><a href="#12-消息队列" class="headerlink" title="12.消息队列"></a>12.消息队列</h2>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>Title:</span><a href="/2022/10/04/Unix%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1(%E7%AC%94%E8%AE%B0)/">Unix程序设计（笔记）</a></p>
        <p><span>Author:</span><a href="/" title="Back to Homepage"></a></p>
        <p><span>Created:</span>2022-10-04, 11:01:24</p>
        <p><span>Updated:</span>2022-11-10, 09:27:50</p>
        <p>
            <span>Full URL:</span><a class="post-url" href="/2022/10/04/Unix%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1(%E7%AC%94%E8%AE%B0)/" title="Unix程序设计（笔记）">http://example.com/2022/10/04/Unix%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1(%E7%AC%94%E8%AE%B0)/</a>
            <span class="copy-path" data-clipboard-text="From http://example.com/2022/10/04/Unix%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1(%E7%AC%94%E8%AE%B0)/　　By " title="Copy Article&#39;s Link &amp; Author"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>License:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"CC BY-NC-SA 4.0"</a> Keep Link &amp; Author if Distribute.
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2022/10/11/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0%EF%BC%88%E7%AC%94%E8%AE%B0%EF%BC%89/">
                    算法与数据结构（笔记）
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2022/09/30/%E6%88%90%E5%B0%B1%E8%A7%A3%E9%94%81%EF%BC%88%E6%97%A5%E5%B8%B8%EF%BC%89/">
                    成就解锁（日常）
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#UNIX%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">UNIX程序设计笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%B4%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.</span> <span class="toc-text">头文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Unix%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.</span> <span class="toc-text">1.Unix基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#shell"><span class="toc-number">1.2.1.</span> <span class="toc-text">shell</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">文件管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">目录管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8vi"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">文本编辑器vi</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BC%96%E7%A8%8B%E5%A5%97%E4%BB%B6"><span class="toc-number">1.3.</span> <span class="toc-text">2.编程套件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#gcc%E6%88%96cc"><span class="toc-number">1.3.1.</span> <span class="toc-text">gcc或cc</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.3.1.0.1.</span> <span class="toc-text">编译程序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.3.1.0.2.</span> <span class="toc-text">执行程序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#gcc%E9%80%89%E9%A1%B9"><span class="toc-number">1.3.1.0.3.</span> <span class="toc-text">gcc选项</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%B4%E6%96%87%E4%BB%B6-1"><span class="toc-number">1.3.1.0.4.</span> <span class="toc-text">头文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%93%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.0.5.</span> <span class="toc-text">库文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.0.6.</span> <span class="toc-text">目标文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">1.3.1.0.7.</span> <span class="toc-text">宏定义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9"><span class="toc-number">1.3.1.0.8.</span> <span class="toc-text">编译选项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#make"><span class="toc-number">1.3.2.</span> <span class="toc-text">make</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gdb%E8%B0%83%E8%AF%95"><span class="toc-number">1.3.3.</span> <span class="toc-text">gdb调试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">3.库的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%BA%93"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">静态库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%BA%93"><span class="toc-number">1.4.0.2.</span> <span class="toc-text">动态库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E8%B0%83%E7%94%A8"><span class="toc-number">1.4.0.2.1.</span> <span class="toc-text">隐式调用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E8%B0%83%E7%94%A8"><span class="toc-number">1.4.0.2.2.</span> <span class="toc-text">显示调用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E5%B7%A5%E5%85%B7"><span class="toc-number">1.4.0.3.</span> <span class="toc-text">操作工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%BA%93%E7%BC%96%E7%A8%8B"><span class="toc-number">1.4.0.4.</span> <span class="toc-text">静态库编程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%BA%93%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">1.4.0.4.1.</span> <span class="toc-text">静态库的应用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%BA%93%E7%BC%96%E7%A8%8B"><span class="toc-number">1.4.0.5.</span> <span class="toc-text">动态库编程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.</span> <span class="toc-text">4.文件系统结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E5%87%BD%E6%95%B0%E6%97%8F"><span class="toc-number">1.5.0.0.1.</span> <span class="toc-text">文件属性函数族</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.5.0.0.2.</span> <span class="toc-text">文件类型</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%A0%87%E5%87%86%E6%96%87%E4%BB%B6%E7%BC%96%E7%A8%8B%E5%BA%93"><span class="toc-number">1.6.</span> <span class="toc-text">5.标准文件编程库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%BD%8E%E7%BA%A7%E6%96%87%E4%BB%B6%E7%BC%96%E7%A8%8B%E5%BA%93"><span class="toc-number">1.7.</span> <span class="toc-text">6.低级文件编程库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E7%BC%96%E7%A8%8B%E5%BA%93"><span class="toc-number">1.8.</span> <span class="toc-text">7.目录文件编程库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%AE%BE%E5%A4%87%E6%96%87%E4%BB%B6"><span class="toc-number">1.9.</span> <span class="toc-text">8.设备文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8E%A7%E5%88%B6"><span class="toc-number">1.10.</span> <span class="toc-text">9.进程的控制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.10.0.0.1.</span> <span class="toc-text">进程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B"><span class="toc-number">1.10.0.0.2.</span> <span class="toc-text">线程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.10.0.0.3.</span> <span class="toc-text">守护进程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%89%8D%E5%8F%B0%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.10.0.0.4.</span> <span class="toc-text">前台进程和后台进程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.10.0.0.5.</span> <span class="toc-text">父子进程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81"><span class="toc-number">1.10.0.0.6.</span> <span class="toc-text">进程状态</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E6%A0%87%E8%AF%86"><span class="toc-number">1.10.0.0.7.</span> <span class="toc-text">进程标识</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.10.0.0.8.</span> <span class="toc-text">进程的创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E4%BC%91%E7%9C%A0"><span class="toc-number">1.10.0.0.9.</span> <span class="toc-text">进程的休眠</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%BB%88%E6%AD%A2"><span class="toc-number">1.10.0.0.10.</span> <span class="toc-text">进程的终止</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%90%8C%E6%AD%A5"><span class="toc-number">1.10.0.0.11.</span> <span class="toc-text">进程的同步</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.10.0.0.12.</span> <span class="toc-text">僵尸进程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B-1"><span class="toc-number">1.10.0.0.13.</span> <span class="toc-text">守护进程</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%97%B6%E9%92%9F%E5%92%8C%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.11.</span> <span class="toc-text">10.时钟和信号</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%92%9F"><span class="toc-number">1.11.1.</span> <span class="toc-text">时钟</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.11.2.</span> <span class="toc-text">信号</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E7%9A%84%E4%BA%A7%E7%94%9F"><span class="toc-number">1.11.2.1.</span> <span class="toc-text">信号的产生</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%A8%8B%E5%BA%8F%E5%87%BA%E9%94%99"><span class="toc-number">1.11.2.1.1.</span> <span class="toc-text">1.程序出错</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%A4%96%E9%83%A8%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.11.2.1.2.</span> <span class="toc-text">2.外部事件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%98%BE%E7%A4%BA%E8%AF%B7%E6%B1%82"><span class="toc-number">1.11.2.1.3.</span> <span class="toc-text">3.显示请求</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.11.2.2.</span> <span class="toc-text">信号的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%B3%BB%E7%BB%9F%E5%A4%84%E7%90%86"><span class="toc-number">1.11.2.2.1.</span> <span class="toc-text">1.系统处理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%BF%BD%E7%95%A5%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.11.2.2.2.</span> <span class="toc-text">2.忽略信号</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%8D%95%E8%8E%B7%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.11.2.2.3.</span> <span class="toc-text">3.捕获信号</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E5%85%A8%E5%AE%B6%E7%A6%8F"><span class="toc-number">1.11.2.3.</span> <span class="toc-text">信号全家福</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E8%B7%B3%E8%BD%AC"><span class="toc-number">1.11.2.3.1.</span> <span class="toc-text">全局跳转</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E7%AE%A1%E9%81%93"><span class="toc-number">1.12.</span> <span class="toc-text">11.管道</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E5%90%8D%E7%AE%A1%E9%81%93"><span class="toc-number">1.12.1.</span> <span class="toc-text">无名管道</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%97%A0%E5%90%8D%E7%AE%A1%E9%81%93"><span class="toc-number">1.12.1.1.</span> <span class="toc-text">创建无名管道</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E5%90%91%E7%AE%A1%E9%81%93%E6%B5%81"><span class="toc-number">1.12.1.2.</span> <span class="toc-text">单向管道流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E5%90%91%E7%AE%A1%E9%81%93"><span class="toc-number">1.12.1.3.</span> <span class="toc-text">双向管道</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#I-x2F-O%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.12.1.4.</span> <span class="toc-text">I&#x2F;O重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#popen%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.12.1.5.</span> <span class="toc-text">popen模型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%90%8D%E7%AE%A1%E9%81%93"><span class="toc-number">1.12.2.</span> <span class="toc-text">有名管道</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%9C%89%E5%90%8D%E7%AE%A1%E9%81%93"><span class="toc-number">1.12.2.1.</span> <span class="toc-text">创建有名管道</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E6%9C%89%E5%90%8D%E7%AE%A1%E9%81%93%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-number">1.12.2.2.</span> <span class="toc-text">应用有名管道的流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E6%9C%89%E5%90%8D%E7%AE%A1%E9%81%93%E7%9A%84%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.12.2.3.</span> <span class="toc-text">应用有名管道的模型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%9C1-1%E2%80%9D%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.12.2.3.1.</span> <span class="toc-text">“1-1”模型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%9Cn-1%E2%80%9D%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.12.2.3.2.</span> <span class="toc-text">“n-1”模型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%9Cn-1-n%E2%80%9D%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.12.2.3.3.</span> <span class="toc-text">“n-1-n”模型</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"><span class="toc-number">1.13.</span> <span class="toc-text">12.消息队列</span></a></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="Hide"  title="Show or Hide Table of Contents">

    <script>
        yiliaConfig.toc = ["Hide", "Show", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"Unix程序设计（笔记）　| Hexo　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2022/10/11/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0%EF%BC%88%E7%AC%94%E8%AE%B0%EF%BC%89/" title="Pre: 算法与数据结构（笔记）">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="Mini Archives"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2022/09/30/%E6%88%90%E5%B0%B1%E8%A7%A3%E9%94%81%EF%BC%88%E6%97%A5%E5%B8%B8%EF%BC%89/" title="Next: 成就解锁（日常）">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/11/16/%E6%95%99%E5%B8%88%E5%B7%A5%E4%BD%9C%E9%87%8F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%80%9D%E8%B7%AF%EF%BC%88%E9%93%BE%E8%A1%A8%E5%BA%94%E7%94%A8%EF%BC%89/">教师工作量管理系统思路（链表应用）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/11/14/%E9%93%BE%E8%A1%A8(%E5%88%86%E4%BA%AB)/">链表实现（分享）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/11/12/%E4%BA%8C%E5%8F%89%E6%A0%91%E6%93%8D%E4%BD%9C%E4%B8%89%E9%81%93%E9%A2%98%EF%BC%88%E5%88%86%E4%BA%AB%EF%BC%89/">二叉树操作三道题（分享）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/11/03/Python%E7%AC%94%E8%AE%B0%EF%BC%88%E7%AC%94%E8%AE%B0%EF%BC%89/">Python（笔记）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/11/%E4%BF%A1%E6%81%AF%E5%AD%98%E5%82%A8%E4%B8%8E%E7%AE%A1%E7%90%86%EF%BC%88%E7%AC%94%E8%AE%B0%EF%BC%89/">信息存储与管理（笔记）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/11/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0%EF%BC%88%E7%AC%94%E8%AE%B0%EF%BC%89/">算法与数据结构（笔记）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/04/Unix%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1(%E7%AC%94%E8%AE%B0)/">Unix程序设计（笔记）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/09/30/%E6%88%90%E5%B0%B1%E8%A7%A3%E9%94%81%EF%BC%88%E6%97%A5%E5%B8%B8%EF%BC%89/">成就解锁（日常）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/09/27/Linux%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B(%E7%AC%94%E8%AE%B0)/">Linux高级编程（笔记）</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/09/26/%E6%95%B2%E4%BB%A3%E7%A0%81%E7%9A%84%E7%8C%AB%E7%9A%84%E5%8D%9A%E5%AE%A2(%E6%97%A5%E5%B8%B8)/">第一篇博客（日常）</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2022 John Doe
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="Site Visitors"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="Page Hits"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="Comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>